{"version":3,"file":"selectfield.js","sourceRoot":"","sources":["../../../../src/components/inputs/select/selectfield.tsx"],"names":[],"mappings":"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","sourcesContent":["import {LabelContext, Popover, Provider, TextContext, TextProps} from 'react-aria-components';\nimport {classNames} from '../../../utils/classnames.js';\nimport {Field} from '../common/field/field.js';\nimport {Size} from '../../../constants/index.js';\nimport {SelectOptionsEmptyState, SelectOptionsEmptyStateProps} from './selectoptionsemptystate.js';\nimport {LoadingItem} from './loadingitem.js';\nimport {ReactNode, RefObject} from 'react';\nimport {SelectItemBase} from './selectitem.js';\nimport {useTranslateCommon} from '../../../hooks/translations/usetranslatecommon.js';\nimport {AnyObject} from '../../../hooks/usechangeparamscallback.js';\nimport {SelectProps} from './selectprops.js';\nimport {UseComboboxReturnValue, UseSelectReturnValue} from 'downshift';\nimport {BottomLoader} from './bottomloader.js';\nimport {renderSelectItems} from './renderselectitems.js';\nimport {SpecialSelectItemKey} from './specialselectitemkey.js';\nimport {InteractionSource} from '../../../constants/interactionsource.js';\nimport {SkeletonField} from '../../feedback/skeleton/skeletonfield.js';\nimport {useDataState} from '../../../hooks/usedatastate.js';\nimport {isFunction} from '../../../utils/functionhelper.js';\n\ninterface SelectFieldProps<P extends AnyObject, TItem extends SelectItemBase<TItem>> extends SelectProps<P, TItem> {\n    children: ReactNode;\n    getItemProps:\n        | UseComboboxReturnValue<SelectItemBase<TItem>>['getItemProps']\n        | UseSelectReturnValue<SelectItemBase<TItem>>['getItemProps'];\n    getLabelProps:\n        | UseComboboxReturnValue<SelectItemBase<TItem>>['getLabelProps']\n        | UseSelectReturnValue<SelectItemBase<TItem>>['getLabelProps'];\n    getMenuProps:\n        | UseComboboxReturnValue<SelectItemBase<TItem>>['getMenuProps']\n        | UseSelectReturnValue<SelectItemBase<TItem>>['getMenuProps'];\n    hasError: boolean;\n    helpTextProps: TextProps;\n    highlightedIndex: number;\n    highlightSource: InteractionSource;\n    isOpen: boolean;\n    itemsToRender: TItem[];\n    listBoxRef: RefObject<HTMLDivElement | null>;\n    popoverRef: RefObject<HTMLDivElement | null>;\n    selectedItem: TItem | null;\n    triggerContentRef: RefObject<HTMLDivElement | null>;\n}\n\nexport function SelectField<P extends AnyObject, TItem extends SelectItemBase<TItem>>({\n    children: fieldContent,\n    className,\n    dataState,\n    disabledKeys,\n    expandedKeys,\n    getItemProps,\n    getLabelProps,\n    getMenuProps,\n    hasError,\n    helpText,\n    helpTextProps,\n    highlightedIndex,\n    highlightSource,\n    isDisabled,\n    isOpen,\n    isLoading,\n    isReadOnly,\n    isRequired,\n    isSkeleton,\n    itemClassName,\n    itemsToRender,\n    label,\n    listBoxRef,\n    menuWidth,\n    onBottomLoaderVisible,\n    popoverRef,\n    ref,\n    renderItemContent,\n    renderItemsEmptyState: propsRenderItemsEmptyState,\n    tooltipContent,\n    triggerContentRef,\n    selectedItem,\n    showHelpTextIcon,\n    size = Size.md\n}: SelectFieldProps<P, TItem>) {\n    const translateCommon = useTranslateCommon();\n    const renderCreateText = (itemText: string) => (\n        <>\n            {`${translateCommon('create')} `}&quot;<strong>{itemText}</strong>&quot;\n        </>\n    );\n    const {errorMessage} = useDataState(dataState, hasError, isReadOnly);\n    const menuProps = getMenuProps({ref: listBoxRef}, {suppressRefError: true});\n\n    // eslint-disable-next-line sonarjs/function-return-type\n    const renderItemsEmptyState = () => {\n        const emptyStateProps: SelectOptionsEmptyStateProps = {\n            size\n        };\n\n        if (isFunction(propsRenderItemsEmptyState)) {\n            return propsRenderItemsEmptyState(emptyStateProps);\n        }\n\n        return <SelectOptionsEmptyState key=\"empty\" {...emptyStateProps} />;\n    };\n\n    if (isSkeleton) {\n        const hasAnyHelpText = !!errorMessage || !!helpText;\n\n        return (\n            <SkeletonField className=\"skeleton-select\" hasHelpText={hasAnyHelpText} hasLabel={!!label} size={size} />\n        );\n    }\n\n    return (\n        <Provider\n            values={[\n                [LabelContext, {...getLabelProps()}],\n                [TextContext, {slots: {description: helpTextProps}}]\n            ]}>\n            <div className={classNames('select', className)} ref={ref}>\n                <Field\n                    dataState={dataState}\n                    helpText={helpText}\n                    isDisabled={isDisabled}\n                    isInvalid={hasError}\n                    isRequired={isRequired}\n                    label={label}\n                    showHelpTextIcon={showHelpTextIcon}\n                    size={size === Size.xs ? Size.sm : Size.md}\n                    tooltipContent={tooltipContent}>\n                    {fieldContent}\n                </Field>\n                <Popover\n                    className=\"select__popover\"\n                    isNonModal={true}\n                    isOpen={isOpen}\n                    maxHeight={280}\n                    placement=\"bottom left\"\n                    ref={popoverRef}\n                    shouldFlip={true}\n                    style={menuWidth ? {width: menuWidth} : undefined}\n                    triggerRef={triggerContentRef}>\n                    <div {...menuProps} className=\"select__listbox\">\n                        {(itemsToRender.length === 0 || itemsToRender[0].value === SpecialSelectItemKey.CREATABLE) &&\n                            !isLoading &&\n                            renderItemsEmptyState()}\n                        {isOpen &&\n                            renderSelectItems({\n                                createText: renderCreateText,\n                                disabledKeys,\n                                expandedKeys,\n                                getItemProps,\n                                highlightSource,\n                                highlightedIndex,\n                                itemClassName,\n                                items: itemsToRender,\n                                renderItemContent,\n                                selectedItem,\n                                size\n                            })}\n                        {isLoading && <LoadingItem key=\"loading\" size={size} />}\n                        {onBottomLoaderVisible && <BottomLoader key=\"loader\" onVisible={onBottomLoaderVisible} />}\n                    </div>\n                </Popover>\n            </div>\n        </Provider>\n    );\n}\n"]}