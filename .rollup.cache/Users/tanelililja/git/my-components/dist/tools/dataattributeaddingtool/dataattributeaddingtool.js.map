{"version":3,"file":"dataattributeaddingtool.js","sourceRoot":"","sources":["../../../src/tools/dataattributeaddingtool/dataattributeaddingtool.tsx"],"names":[],"mappings":"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","sourcesContent":["// @ts-expect-error TS6133 React needs to be imported\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport React, {useCallback, useEffect} from 'react';\nimport {ButtonIcon, CheckIcon} from '@storybook/icons';\nimport {IconButton, WithTooltip, TooltipLinkList} from 'storybook/internal/components';\nimport {useGlobals, useParameter} from 'storybook/manager-api';\nimport {styled, color} from 'storybook/theming';\nimport {DATA_ATTRIBUTE_PARAM_KEY, DATA_ATTRIBUTES} from './constants.js';\nimport {addDataAttributes} from './helpers.js';\n\nconst LinkTitle = styled.span<{active?: boolean}>(({active}) => ({\n    color: active ? color.secondary : 'inherit'\n}));\n\nconst LinkIcon = styled(CheckIcon)<{active?: boolean}>(({active}) => ({\n    opacity: active ? 1 : 0,\n    path: {fill: active ? color.secondary : 'inherit'}\n}));\n\nconst options = Object.keys(DATA_ATTRIBUTES).sort((a, b) => a.localeCompare(b)) as Array<keyof typeof DATA_ATTRIBUTES>;\n\nexport const DataAttributeAddingTool = () => {\n    const [globals, updateGlobals] = useGlobals();\n    const dataAttributeParams: {querySelector: string | null} = useParameter(DATA_ATTRIBUTE_PARAM_KEY, {\n        querySelector: null\n    });\n    const dataAttribute = globals[DATA_ATTRIBUTE_PARAM_KEY];\n\n    const isActive = useCallback(\n        (option: keyof typeof DATA_ATTRIBUTES) => {\n            if (!dataAttribute) {\n                return false;\n            }\n\n            return dataAttribute[option] === true;\n        },\n        [dataAttribute]\n    );\n\n    const toggleOption = useCallback(\n        (option: keyof typeof DATA_ATTRIBUTES) => () => {\n            const isDataAttributeActive = !isActive(option);\n\n            updateGlobals({\n                [DATA_ATTRIBUTE_PARAM_KEY]: {\n                    ...dataAttribute,\n                    [option]: isDataAttributeActive\n                }\n            });\n        },\n        [dataAttribute]\n    );\n\n    useEffect(() => {\n        const dataAttributes = Object.keys(dataAttribute ?? {}).filter((key) => dataAttribute[key] === true);\n\n        if (dataAttributeParams.querySelector) {\n            addDataAttributes(dataAttributeParams.querySelector, dataAttributes);\n        }\n    }, [dataAttribute]);\n\n    const renderTooltip = () => (\n        <TooltipLinkList\n            links={options.map((option) => ({\n                id: option,\n                title: <LinkTitle active={isActive(option)}>{option}</LinkTitle>,\n                right: <LinkIcon active={isActive(option)} height={12} width={12} />,\n                onClick: toggleOption(option),\n                active: isActive(option)\n            }))}\n        />\n    );\n\n    return dataAttributeParams.querySelector ?\n            <WithTooltip placement=\"top\" tooltip={renderTooltip} trigger=\"click\">\n                <IconButton\n                    active={options.some(isActive)}\n                    key=\"data-attribute-tool\"\n                    title=\"Select data-attribute to be given to the component\">\n                    <ButtonIcon />\n                </IconButton>\n            </WithTooltip>\n        :   null;\n};\n"]}